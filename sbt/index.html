<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="izumi-r2">
<meta name="generator" content="Paradox, paradox-material-theme=0.4.0, mkdocs-material=2.2.2">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.language" content="">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="izumi-r2">
<link rel="shortcut icon" href="../assets/images/favicon.png">
<title>SBT Toolkit Â· Izumi Toolkit</title>
<link rel="stylesheet" href="../assets/stylesheets/application.7a4cdee3.css">
<link rel="stylesheet" href="../lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="../lib/prettify/prettify.css">
<script src="../lib/modernizr/modernizr.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../assets/stylesheets/paradox-material-theme.css">
</head>
<body
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
<label class="md-overlay" data-md-component="overlay" for="drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="../index.html" title="Izumi Toolkit" class="md-header-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
Izumi Toolkit
</span>
<span class="md-header-nav__topic">
SBT Toolkit
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="search"></label>
<div class="md-search__inner">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
<label class="md-icon md-search__icon" for="search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<span class="md-nav__button md-logo">
<i class="md-icon">local_library</i>
</span>
<a href="../index.html" title="Izumi Toolkit">
Izumi Toolkit
</a>
</label>
<ul>
  <li><a href="../manifesto/index.html" class="page">Our approach to productivity</a></li>
  <li><a href="../pper/index.html" class="page">PPER Pattern</a></li>
  <li><a href="../distage/index.html" class="page">DiStage DI</a></li>
  <li><a href="../idealingua/index.html" class="page">Idealingua DML/IDL</a>
  <ul>
    <li><a href="../idealingua/cogen.html" class="page">Code generator reference</a></li>
    <li><a href="../idealingua/cogen-circe.html" class="page">Circe serialization reference</a></li>
  </ul></li>
  <li><a href="../logstage/index.html" class="page">Logstage</a></li>
  <li><a href="../sbt/index.html" class="active page">SBT Toolkit</a></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="toc">Table of contents</label>
<ul>
  <li><a href="../sbt/index.html#sbt-toolkit" class="header">SBT Toolkit</a>
  <ul>
    <li><a href="../sbt/index.html#inherited-test-scopes" class="header">Inherited Test Scopes</a></li>
    <li><a href="../sbt/index.html#settings-dsl" class="header">Settings DSL</a></li>
    <li><a href="../sbt/index.html#build-descriptors" class="header">Build Descriptors</a></li>
    <li><a href="../sbt/index.html#convenience-helpers" class="header">Convenience Helpers</a></li>
    <li><a href="../sbt/index.html#optional-settings" class="header">Optional settings</a></li>
  </ul></li>
</ul>
</nav>

<div class="md-nav__title--site md-version" title="Version">
<i class="md-icon">label_outline</i> 0.6.0*
</div>
</nav>

</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="toc">Table of contents</label>
<ul>
  <li><a href="../sbt/index.html#sbt-toolkit" class="header">SBT Toolkit</a>
  <ul>
    <li><a href="../sbt/index.html#inherited-test-scopes" class="header">Inherited Test Scopes</a></li>
    <li><a href="../sbt/index.html#settings-dsl" class="header">Settings DSL</a></li>
    <li><a href="../sbt/index.html#build-descriptors" class="header">Build Descriptors</a></li>
    <li><a href="../sbt/index.html#convenience-helpers" class="header">Convenience Helpers</a></li>
    <li><a href="../sbt/index.html#optional-settings" class="header">Optional settings</a></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#sbt-toolkit" name="sbt-toolkit" class="anchor"><span class="anchor-link"></span></a>SBT Toolkit</h1>
<p>Add the following into your <code>project/plugins.sbt</code>:</p>
<pre class="prettyprint"><code class="language-scala">val izumi_version = &quot;0.6.0-SNAPSHOT&quot;
addSbtPlugin(&quot;com.github.pshirshov.izumi.r2&quot; % &quot;sbt-izumi&quot; % izumi_version)
// This is a Izumi&#39;s Bill of Materials, see below
addSbtPlugin(&quot;com.github.pshirshov.izumi.r2&quot; % &quot;sbt-izumi-deps&quot; % izumi_version)
</code></pre>
<p>To activate all the plugins add the following statements into your root project:</p>
<pre class="prettyprint"><code class="language-scala">enablePlugins(IzumiEnvironmentPlugin)
enablePlugins(IzumiDslPlugin)
enablePlugins(GitStampPlugin)
</code></pre>
<h2><a href="#inherited-test-scopes" name="inherited-test-scopes" class="anchor"><span class="anchor-link"></span></a>Inherited Test Scopes</h2>
<h3><a href="#test-scope-inheritance" name="test-scope-inheritance" class="anchor"><span class="anchor-link"></span></a>Test Scope Inheritance</h3>
<p><code>IzumiScopesPlugin</code> extends SBT <code>Project</code> with several implicit methods:</p>
<ul>
  <li><code>testOnlyRef</code> - provides you a project reference which is equivalent to <code>% &quot;test&quot;</code> dependency,</li>
  <li><code>dependsSeq</code> and <code>depends</code> - allow you to add dependencies to your project the way test scopes of your dependencies are visible within test scopes of your project. So, essentially when you use these methods your dependencies are added into your projects with the following qualifier: <code>&quot;test-&gt;compile,test;it-&gt;compile,test,it&quot;</code></li>
</ul>
<p>You need to activate <code>DefaultItSettingsGroup</code> on your projects (see &ldquo;Setting Groups&rdquo; below) in order to make this working on <code>it</code> scope.</p>
<p>Example: </p>
<pre class="prettyprint"><code class="language-scala">lazy val myLibrary = ...

lazy val myProject = (...).depends(myLibrary)
</code></pre>
<p>So, now you may use classes from the test scope of <code>myLibrary</code> within test scope of <code>myProject</code></p>
<h3><a href="#test-scope-separation" name="test-scope-separation" class="anchor"><span class="anchor-link"></span></a>Test Scope Separation</h3>
<h3><a href="#test-scope-publishing" name="test-scope-publishing" class="anchor"><span class="anchor-link"></span></a>Test Scope Publishing</h3>
<p>The whole content of test scopes is being published by default with <code>test</code> qualifier. Test scope separation has no effect on test scope publishing.</p>
<h2><a href="#settings-dsl" name="settings-dsl" class="anchor"><span class="anchor-link"></span></a>Settings DSL</h2>
<p><code>IzumiDslPlugin</code> provides you a DSL inteded to simplify definitions of complex project layouts.</p>
<p>To activate the plugin add the following statement into your root project:</p>
<pre class="prettyprint"><code class="language-scala">enablePlugins(IzumiDslPlugin)
</code></pre>
<h3><a href="#simplified-identifiers" name="simplified-identifiers" class="anchor"><span class="anchor-link"></span></a>Simplified Identifiers</h3>
<h3><a href="#setting-groups" name="setting-groups" class="anchor"><span class="anchor-link"></span></a>Setting Groups</h3>
<h4><a href="#global-setting-group" name="global-setting-group" class="anchor"><span class="anchor-link"></span></a>Global Setting Group</h4>
<h3><a href="#automatic-aggregation" name="automatic-aggregation" class="anchor"><span class="anchor-link"></span></a>Automatic Aggregation</h3>
<h3><a href="#aggregation-safety-check" name="aggregation-safety-check" class="anchor"><span class="anchor-link"></span></a>Aggregation Safety Check</h3>
<h2><a href="#build-descriptors" name="build-descriptors" class="anchor"><span class="anchor-link"></span></a>Build Descriptors</h2>
<h3><a href="#bills-of-materials" name="bills-of-materials" class="anchor"><span class="anchor-link"></span></a>Bills of Materials</h3>
<h3><a href="#git-manifests" name="git-manifests" class="anchor"><span class="anchor-link"></span></a>Git Manifests</h3>
<p><code>GitStampPlugin</code> adds the following values into <code>MANIFEST.MF</code> of each <code>jar</code> artifact produced:</p>
<table>
  <thead>
    <tr>
      <th>Manifest Key </th>
      <th>Description </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>X-Git-Branch</code> </td>
      <td>The name of branch sbt was invoked on </td>
    </tr>
    <tr>
      <td><code>X-Git-Repo-Is-Clean</code> </td>
      <td><code>true</code> or <code>false</code>, indicates if GIT repo was in clean state when the build was invoked </td>
    </tr>
    <tr>
      <td><code>X-Git-Head-Rev</code> </td>
      <td>GIT revision on which sbt was invoked </td>
    </tr>
  </tbody>
</table>
<p>To activate the plugin add the following statement into your root project:</p>
<pre class="prettyprint"><code class="language-scala">enablePlugins(GitStampPlugin)
</code></pre>
<h2><a href="#convenience-helpers" name="convenience-helpers" class="anchor"><span class="anchor-link"></span></a>Convenience Helpers</h2>
<h3><a href="#stub-generators" name="stub-generators" class="anchor"><span class="anchor-link"></span></a>Stub Generators</h3>
<p><code>ConvenienceTasksPlugin</code> provides you the following commands:</p>
<ul>
  <li><code>newModule &lt;module_path/module_name&gt; [package.suffix]</code>: creates empty project layout at <code>/module_path/module_name</code>. Optional <code>package.suffix</code> may be specified.</li>
  <li><code>newStub &lt;module_path/module_name&gt; [stub_name:default]</code>: copies <code>/stubs/${stub_name}</code> into <code>/module_path/module_name</code>. <code>stub_name</code> may be omitted, default value is <code>default</code></li>
</ul>
<table>
  <thead>
    <tr>
      <th>Setting </th>
      <th>Description </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ConvenienceTasksPlugin.Keys.mkJavaDirs </td>
      <td>Adds <code>src/*/java</code> paths into generated stubs </td>
    </tr>
    <tr>
      <td>ConvenienceTasksPlugin.Keys.defaultStubPackage </td>
      <td>Default stub package <code>(sbt.Keys.organization in ThisBuild).value</code></td>
    </tr>
  </tbody>
</table>
<h3><a href="#version-suffixes" name="version-suffixes" class="anchor"><span class="anchor-link"></span></a>Version Suffixes</h3>
<p><code>ConvenienceTasksPlugin</code> provides you command</p>
<pre><code>addVersionSuffix SUFFIX
</code></pre>
<p>This command updates project version defined in <code>version.sbt</code> with qualifier <code>SUFFIX-SNAPSHOT</code></p>
<ul>
  <li>Existing qualifiers will be removed.</li>
  <li><code>1.0.0</code> would become <code>1.0.0-SUFFIX-SNAPSHOT</code></li>
  <li><code>1.0.0-SNAPSHOT</code> would become <code>1.0.0-SUFFIX-SNAPSHOT</code></li>
</ul>
<p>You may need this command while setting up a build for feature branches and wish to avoid situation when different branches publishes artifacts with the same names. </p>
<h3><a href="#target-preservation" name="target-preservation" class="anchor"><span class="anchor-link"></span></a><code>target</code> preservation</h3>
<p><code>ConvenienceTasksPlugin</code> provides you command</p>
<pre><code>preserveTargets SUFFIX
</code></pre>
<p>This command recursively enumerates all the directories named <code>target</code> and recursively copies them using name <code>target.SUFFIX</code>.</p>
<p>You may need this command while setting up a build where you wish to perform <code>clean</code> several times but want to preserve intermediate build artifacts stored in <code>target</code> directories. The most frequent case is coverage build followed by tests and then by production build. In this case you would like to use a command sequence like</p>
<pre><code>;clean;coverage;test;coverageOff;coverageReport;preserveTargets coverage;clean;publish
</code></pre>
<h3><a href="#directory-cleanups" name="directory-cleanups" class="anchor"><span class="anchor-link"></span></a>Directory cleanups</h3>
<p><code>ConvenienceTasksPlugin</code> provides you command</p>
<pre><code>rmDirs target.coverage
</code></pre>
<p>This command recursively removes all the directories named <code>target.coverage</code> across the project.</p>
<p>You may need this command to cleanup preserved target directories, or destroy some build artifacts, like <code>rmDirs scala-2.11</code></p>
<h3><a href="#property-readers" name="property-readers" class="anchor"><span class="anchor-link"></span></a>Property Readers</h3>
<p><code>IzumiPropertiesPlugin</code> provides you implicit classes allowing you to convert Strings into Integers or Booleans exceptions-safe and do the same for system properties: </p>
<pre class="prettyprint"><code class="language-scala">&quot;true&quot;.asBoolean(default = false) // true
&quot;junk&quot;.asBoolean(default = false) // false
&quot;123&quot;.asInt(default = 265) // 123
&quot;junk&quot;.asInt(default = 265) // 265
sys.props.asBoolean(&quot;my.property&quot;, default = false)
sys.props.asInt(&quot;my.property&quot;, default = 123)
</code></pre>
<p>You may activate this plugin with the following statement in root project:</p>
<h2><a href="#optional-settings" name="optional-settings" class="anchor"><span class="anchor-link"></span></a>Optional settings</h2>
<h3><a href="#publishing" name="publishing" class="anchor"><span class="anchor-link"></span></a>Publishing</h3>
<h4><a href="#publishing-settings" name="publishing-settings" class="anchor"><span class="anchor-link"></span></a>Publishing settings</h4>
<h4><a href="#publishing-credentials-and-targets" name="publishing-credentials-and-targets" class="anchor"><span class="anchor-link"></span></a>Publishing credentials and targets</h4>
<h3><a href="#compiler-options" name="compiler-options" class="anchor"><span class="anchor-link"></span></a>Compiler options</h3>
<h3><a href="#resolvers" name="resolvers" class="anchor"><span class="anchor-link"></span></a>Resolvers</h3>
<p><code>ResolverPlugin</code> turns on the following settings which should speedup your dependency resolution:</p>
<pre class="prettyprint"><code class="language-scala">    updateOptions := updateOptions
      .value
      .withCachedResolution(true)
      .withGigahorse(true)
</code></pre>
</div>
<div>
<a href="https://github.com/pshirshov/izumi-r2/tree/master/doc/paradox/sbt/00_sbt.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
0.6.0*
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="../logstage/index.html" title="Logstage" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
Logstage
</span>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/">Paradox Material Theme</a>

</div>
</div>
</div>
</footer>

</div>
<script src="../assets/javascripts/application.5165553b.js"></script>
<script src="../assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"../."}})</script>
<script type="text/javascript" src="../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
</body>
</html>
